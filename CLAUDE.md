# ARCDevTools - Agent Instructions

ARCDevTools is the **centralized quality tooling repository** for ARC Labs Studio. It is consumed by projects as a git submodule and provides automated configuration for code quality, CI/CD, and development workflows.

This is the **tooling source repo**, not a consumer project. Changes here propagate to every ARC Labs project on their next submodule update.

---

## What This Repo Contains

| Directory | Purpose |
|-----------|---------|
| `configs/` | SwiftLint (`swiftlint.yml`) and SwiftFormat (`swiftformat`) configurations |
| `hooks/` | Git hooks: `pre-commit` (format + lint) and `pre-push` (tests) |
| `scripts/` | Utility scripts (lint, format, GitHub labels, branch protection) |
| `workflows-spm/` | GitHub Actions templates for Swift Packages |
| `workflows-ios/` | GitHub Actions templates for iOS Apps |
| `claude-hooks/` | Claude Code hooks (macOS notifications) |
| `.claude/skills/` | ARCDevTools-specific skills (`arc-package-validator`) |
| `ARCKnowledge/` | **Submodule** — development standards, architecture docs, and Claude Code skills |
| `arcdevtools-setup` | Swift script that installs everything into consumer projects |

## What ARCKnowledge Provides (Submodule)

ARCKnowledge contains the **development standards** and **11 Claude Code skills** that get symlinked into consumer projects during setup. All architecture patterns, code style rules, testing standards, and workflow conventions live there — not here.

- Standards: `ARCKnowledge/Architecture/`, `ARCKnowledge/Layers/`, `ARCKnowledge/Quality/`
- Skills: `ARCKnowledge/.claude/skills/` (11 skills, see `ARCKnowledge/Skills/skills-index.md`)
- Agent guide: `ARCKnowledge/CLAUDE.md` (comprehensive guide used by consumer projects)

**Do not duplicate ARCKnowledge content in ARCDevTools.** Reference it instead.

---

## How Consumer Projects Use ARCDevTools

```
Consumer Project
├── ARCDevTools/                 ← git submodule (this repo)
│   └── ARCKnowledge/           ← nested submodule
├── .swiftlint.yml              ← copied from configs/
├── .swiftformat                ← copied from configs/
├── .git/hooks/                 ← installed from hooks/
├── Makefile                    ← generated by arcdevtools-setup
└── .claude/skills/             ← symlinks to ARCKnowledge skills + copied ARCDevTools skills
```

Running `./ARCDevTools/arcdevtools-setup` in a consumer project:
1. Detects project type (Swift Package or iOS App)
2. Copies config files to project root
3. Installs git hooks
4. Generates a Makefile with `make lint`, `make format`, `make test`, etc.
5. Symlinks ARCKnowledge skills into `.claude/skills/`
6. Updates `.gitignore` with symlinked skill paths

---

## Working on This Repo

### Modifying Configs

- `configs/swiftlint.yml` — The authoritative SwiftLint config. Changes affect all consumer projects.
- `configs/swiftformat` — The authoritative SwiftFormat config. Same propagation.
- `.swiftlint.yml` (root) — Local override for linting this repo's own Swift code (the setup script).

Config rules must align with ARCKnowledge standards. When updating rules, check `ARCKnowledge/Quality/code-style.md` for the source of truth.

### Modifying the Setup Script

`arcdevtools-setup` is a Swift script (~800 lines). Key functions:
- `detectProjectType()` — Detects Swift Package vs iOS App
- `setupConfigs()` — Copies config files
- `setupGitHooks()` — Installs hooks
- `generateMakefile()` — Creates project-appropriate Makefile
- `setupClaudeSkills()` — Copies ARCDevTools skills, symlinks ARCKnowledge skills

Test changes by running the script in a sample project before committing.

### Updating ARCKnowledge

```bash
cd ARCKnowledge
git pull origin main
cd ..
git add ARCKnowledge
git commit -m "chore(deps): update ARCKnowledge submodule to vX.Y.Z"
```

### Git Conventions

- **Commits**: `<type>(<scope>): <subject>` (Conventional Commits)
- **Branches**: `feature/description`, `bugfix/description`
- **Types**: `feat`, `fix`, `docs`, `refactor`, `test`, `chore`, `style`

---

## Skill Priority (for agents working on consumer projects)

When working on an ARC Labs project that includes ARCDevTools:

1. **ARCKnowledge skills** (`/arc-*`) — ARC Labs architecture, standards, workflow
2. **Axiom skills** (`axiom-*`) — Apple platform patterns, diagnostics, iOS APIs
3. **MCP Cupertino** — Official Apple documentation lookup

See `ARCKnowledge/Skills/skills-index.md` for the complete routing guide.
